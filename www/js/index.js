var V=function(){N.fillStyle=y,N.fillRect(0,0,F,L)},E=function(K,R,q,A,B){const H=K*q,O=R*q;if(B)N.fillStyle=B,N.fillRect(H+1,O+1,q-2,q-2);N.strokeStyle=A,N.strokeRect(H,O,q,q)},w=function(K,R,q){E(K,R,Q*3,J,q);for(let A=0;A<3;A++)for(let B=0;B<3;B++)E(K*3+B,R*3+A,Q,I)},g=function(K,R){if(X[R][K]!==null){N.font="bold 60px Arial",N.textBaseline="middle",N.textAlign="center";const q=K*Q+Math.floor(Q*0.5),A=R*Q+Math.floor(Q*0.575);N.fillText(X[R][K].toString(),q,A)}else{N.fillStyle="#000",N.font="16px Arial",N.textBaseline="top",N.textAlign="start";const q=U[R][K],A=Math.max(Q-2,Math.floor(Q*0.8)),B=Math.floor(A/3),H=Math.max(1,Math.floor(Q*0.1)),O=K*Q+H,W=R*Q+H;for(let M=1;M<=9;M++){const Z=q.includes(M)?M:null,G=(M-1)%3,b=Math.floor((M-1)/3),h=O+B*G,f=W+B*b;N.fillText(Z!==null?Z.toString():"",h,f)}}},P=function(){for(let K=0;K<9;K++)for(let R=0;R<9;R++)g(R,K)},T=function(){V();for(let K=0;K<3;K++)for(let R=0;R<3;R++)w(R,K)},p=function(K){const[R,q]=Y;if(X[q][R]===K)X[q][R]=null,u(R,q,K);else if(U[q][R].includes(K))X[q][R]=K,D(R,q,K);T(),P()},D=function(K,R,q){for(let H=0;H<9;H++){const O=U[H][K],W=O.indexOf(q);if(W>-1)O.splice(W,1);const M=U[R][H],Z=M.indexOf(q);if(Z>-1)M.splice(Z,1)}const A=Math.floor(K/3),B=Math.floor(R/3);for(let H=0;H<3;H++)for(let O=0;O<3;O++){const W=U[B*3+H][A*3+O],M=W.indexOf(q);if(M>-1)W.splice(M,1)}},u=function(K,R,q){for(let A=0;A<9;A++){if(X[A][K]===null&&!U[A][K].includes(q))U[A][K].push(q);if(X[R][A]===null&&!U[R][A].includes(q))U[R][A].push(q)}for(let A=0;A<3;A++)for(let B=0;B<3;B++){const H=Math.floor(K/3),O=Math.floor(R/3),W=H*3+B,M=O*3+A;if(X[M][W]===null&&!U[M][W].includes(q))U[M][W].push(q)}},$=new WebSocket(`ws://${location.host}`);$.onopen=()=>{setInterval(()=>$.send("ping"),5000),$.send("Hello from the client!")};$.onmessage=(K)=>{if(K.data==="reload")location.reload()};var y="#DDD",I="#AAA",J="#000",_=document.getElementById("sudokuCanvas"),N=_.getContext("2d"),F=_.width,L=_.height,Q=Math.round(Math.min(F,L)/9),U=[],X=[];for(let K=0;K<9;K++){U.push([]),X.push([]);for(let R=0;R<9;R++)U[K].push([1,2,3,4,5,6,7,8,9]),X[K].push(null)}T();P();var Y=null;_.addEventListener("mousemove",(K)=>{K.stopPropagation();const{offsetX:R,offsetY:q}=K,A=Math.min(Math.floor(R/Q),8),B=Math.min(Math.floor(q/Q),8);if(Y===null||Y[0]!==A||Y[1]!==B)Y=[A,B],console.log("Celulle s\xE9lectionn\xE9e:",Y)});_.addEventListener("mouseout",(K)=>{K.stopPropagation(),Y=null,console.log("Celulle s\xE9lectionn\xE9e:",Y)});document.addEventListener("keydown",(K)=>{if(["1","2","3","4","5","6","7","8","9"].includes(K.key)&&Y!==null)p(parseInt(K.key))});console.log("Frontend charg\xE9");
